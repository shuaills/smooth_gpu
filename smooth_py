from typing import List

def smooth(inlist: List[float], h: int) -> List[float]:
    """
    Smooths a list using a window size of 2*h+1.
    Time Complexity: O(N), where N is the length of inlist.

    Parameters:
    - inlist: Input list of floats.
    - h: Half-size of the smoothing window.
    Returns:
    - A list of smoothed floats of the same length as inlist.
    """
    N = len(inlist)
    if N == 0:
        return []
    
    outlist = [0.0] * N
    running_sum = sum(inlist[:min(h + 1, N)])  
    
    # Initialize the first smoothed value
    outlist[0] = running_sum / min(h + 1, N)  
    
    for i in range(1, N):
        next_boundary = i + h
        prev_boundary = i - h - 1

        # Update the running sum based on the window boundaries
        if next_boundary < N:
            running_sum += inlist[next_boundary]
        if prev_boundary >= 0:
            running_sum -= inlist[prev_boundary]
        
        window_size = min(i + h, N - 1) - max(0, i - h) + 1
        outlist[i] = running_sum / window_size
    
    return outlist